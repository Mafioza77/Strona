<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Race Game</title>
<style>
    canvas {
        border: 1px solid black;
        display: block;
        margin: 0 auto;
    }
</style>
</head>
<body style="rgb(121, 160, 235)">

    <a href="../index.html">Strona Główna</a>

    <p>Jest to gra wyścigowa mająca na celu wyprzedzanie czerwonych samochodów(klocków)</p>
    
<canvas id="raceCanvas" width="400" height="400"></canvas>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const canvas = document.getElementById("raceCanvas");
        const ctx = canvas.getContext("2d");

        let carX = canvas.width / 2;
        const carY = canvas.height - 50;
        let carSpeed = 5;
        const obstacleWidth = 50;
        const obstacleHeight = 20;
        const obstacleSpeed = 3;
        let obstacleX = Math.random() * (canvas.width - obstacleWidth);
        let obstacleY = 0;
        let score = 0;

        function drawCar() {
            ctx.fillStyle = "#0095DD";
            ctx.fillRect(carX, carY, 50, 30);
        }

        function drawObstacle() {
            ctx.fillStyle = "#FF0000";
            ctx.fillRect(obstacleX, obstacleY, obstacleWidth, obstacleHeight);
        }

        function drawScore() {
            ctx.font = "16px Arial";
            ctx.fillStyle = "#0095DD";
            ctx.fillText("Score: " + score, 8, 20);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawCar();
            drawObstacle();
            drawScore();

            obstacleY += obstacleSpeed;
            if (obstacleY > canvas.height) {
                obstacleY = 0;
                obstacleX = Math.random() * (canvas.width - obstacleWidth);
                score++;
            }

            if (carX < obstacleX + obstacleWidth &&
                carX + 50 > obstacleX &&
                carY < obstacleY + obstacleHeight &&
                carY + 30 > obstacleY) {
                clearInterval(gameLoopInterval);
                alert("Game Over! Your score: " + score);
                document.location.reload();
            }
        }

        document.addEventListener("keydown", keyDownHandler);
        document.addEventListener("keyup", keyUpHandler);

        let rightPressed = false;
        let leftPressed = false;

        function keyDownHandler(e) {
            if (e.key === "Right" || e.key === "ArrowRight") {
                rightPressed = true;
            } else if (e.key === "Left" || e.key === "ArrowLeft") {
                leftPressed = true;
            }
        }

        function keyUpHandler(e) {
            if (e.key === "Right" || e.key === "ArrowRight") {
                rightPressed = false;
            } else if (e.key === "Left" || e.key === "ArrowLeft") {
                leftPressed = false;
            }
        }

        function updateCarPosition() {
            if (rightPressed && carX < canvas.width - 50) {
                carX += carSpeed;
            } else if (leftPressed && carX > 0) {
                carX -= carSpeed;
            }
        }

        let gameLoopInterval = setInterval(() => {
            updateCarPosition();
            draw();
        }, 10);
    });
</script>
</body>
</html>
